\newcommand{\docarea}[3]{
    \index{#1}\pbodyitem{#2}{#3}
}

\newcommand{\extparamref}[3]{
    \index{#1}\pbodyitem{#2}{#3}
}

\subsection{Document}
The document namespace contains logic concerning the state of the persisted document.
This sub-system listens for the application to change parameters of the document, and persists them.
Additionally, when a program document file is loaded, it will send notifications to subscribed components.

\lidiagram{diagrams/subsystems/document}
{Document subsystem components.}
{fig:doc_components}

\subsection{Mechanics}
The \dmod\ facade is responsible for registering agents responsible for handling changes to the active document.
The bulk of subsystem-internal implementation includes <<PersistenceWorker>>, which listens for parameters to change, and writes them to a file.

The implementation of PersistenceWorker is bifurcated on target: WASM vs File Storage.

In general, the subsystem functions as follows:
\begin{itemize}
    \item Initialize Document \\
          Publish the necessary parameter changes to recreate the default document.
    \item Save \\
          Write the current state of the document to a serialized location.
    \item Save As \\
          Write the current state of the document to a serialized location to a specific location.
    \item Load Document \\
          Taking a path argument, publish the necessary parameter changes to recreate the deserialized document at that location.
    \item Document Property Change \\
          Perform the given task on the persisted document.
\end{itemize}

