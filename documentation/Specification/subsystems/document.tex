\newcommand{\docarea}[3]{
      \index{#1}\pbodyitem{#2}{#3}
}

\newcommand{\extparamref}[3]{
      \index{#1}\pbodyitem{#2}{#3}
}

\subsection{Document}
The document namespace contains logic concerning the state of the persisted document.
This sub-system listens for the application to change the parameters of the document and persists them.
Additionally, when a program document file is loaded, it will send notifications to subscribed components.

\slidiagram{diagrams/subsystems/document/inter}
{Document inter-subsystem dependencies.}
{fig:doc__inter}
{.5}


\subsubsection{Mechanics}
A \docsftype\ is created from a \docsfftype\ by client code in the root of the application.
The \docsftype\ that is passed into users of \docmod\ as a \docftype\ for further use.

Each \docftype\ supposes a single active document at a given time.
I.e: each document window should have a single attached \docftype.

\lidiagram{diagrams/subsystems/document/intra}
{Document subsystem components.}
{fig:doc_intra}



\subsubsection{Usage}
\docftype\ is responsible for providing an interface for registering agents responsible for handling changes to the active document.
This type is instantiated and referenced by other subsystems at startup.
Those subsystems can register their agents to be notified as \docpctype\ events are propagated by other subsystems.
\docpctype\ events are propagated by passing them to the \docftype .\texttt{propChangeSub} subscriber.